# TradingView 集成检查清单

## 📋 集成前检查

- [ ] 确认项目使用 uni-app 框架
- [ ] 确认目标平台是 H5 (Web)
- [ ] 确认有 react-typescript 项目可以复制库文件
- [ ] 确认 Node.js 和 npm 已安装

## 📦 文件准备

### 必需文件
- [ ] `static/charting_library/charting_library.standalone.js` 存在
- [ ] `static/datafeeds/udf/dist/bundle.js` 存在
- [ ] `components/TradingViewChart/TradingViewChart.vue` 已创建
- [ ] `index.html` 已添加脚本加载代码

### 可选文件
- [ ] `copy_charting_library.bat` (Windows 用户)
- [ ] `copy_charting_library.sh` (Mac/Linux 用户)
- [ ] 文档文件已创建

## 🔧 代码集成

### 组件创建
- [ ] TradingViewChart.vue 组件已创建
- [ ] 使用了 `#ifdef H5` 条件编译
- [ ] 添加了非 H5 端的提示信息
- [ ] 实现了 mounted 和 beforeUnmount 生命周期

### 页面更新
- [ ] market/detail.vue 已引入组件
- [ ] 移除了 iframe 相关代码
- [ ] 添加了 tradingSymbol 数据属性
- [ ] 实现了 onChartReady 和 onChartError 方法

### 配置文件
- [ ] index.html 添加了动态脚本加载
- [ ] .gitignore 添加了库文件排除规则

## 🚀 运行测试

### 开发环境
- [ ] 运行 `npm install` 安装依赖
- [ ] 运行 `npm run dev:h5` 启动开发服务器
- [ ] 浏览器能正常打开 `http://localhost:8080`
- [ ] 导航到市场详情页
- [ ] 图表能正常显示

### 浏览器检查
- [ ] 打开浏览器开发者工具 (F12)
- [ ] Console 没有错误信息
- [ ] Network 标签显示脚本加载成功
- [ ] 看到 "TradingView chart ready" 日志
- [ ] 看到 "Updated TradingView symbol" 日志

### 功能测试
- [ ] 图表能正常渲染
- [ ] K线图显示正常
- [ ] 可以缩放和拖动图表
- [ ] 工具栏功能正常
- [ ] 切换交易对时图表更新

## ⚙️ 配置检查

### 数据源配置
- [ ] 确认当前使用的数据源 URL
- [ ] 测试环境可以使用演示数据源
- [ ] 生产环境需要配置真实数据源
- [ ] 数据源 API 可以正常访问

### 样式配置
- [ ] 主题设置为 dark 或 light
- [ ] 颜色方案符合设计要求
- [ ] 图表容器高度设置合适
- [ ] 响应式布局正常

### 功能配置
- [ ] disabled_features 配置正确
- [ ] enabled_features 配置正确
- [ ] locale 设置为正确的语言
- [ ] timezone 设置正确

## 🔍 问题排查

### 图表不显示
- [ ] 确认在 H5 环境运行（浏览器）
- [ ] 检查 static/charting_library/ 文件夹存在
- [ ] 检查浏览器控制台错误信息
- [ ] 检查网络请求是否成功
- [ ] 尝试清除浏览器缓存

### 脚本加载失败
- [ ] 检查文件路径是否正确
- [ ] 检查文件权限
- [ ] 检查服务器配置
- [ ] 尝试重新复制库文件

### 数据不显示
- [ ] 检查数据源 URL
- [ ] 检查网络连接
- [ ] 查看 API 请求响应
- [ ] 检查 CORS 配置

## 📱 平台兼容性

### H5 (Web)
- [ ] Chrome 浏览器测试通过
- [ ] Firefox 浏览器测试通过
- [ ] Safari 浏览器测试通过
- [ ] Edge 浏览器测试通过
- [ ] 移动端浏览器测试通过

### 其他平台
- [ ] 小程序显示提示信息（不支持）
- [ ] App 显示提示信息（不支持）

## 📚 文档完整性

- [ ] README.md 文档已创建
- [ ] 集成指南已创建
- [ ] 快速开始指南已创建
- [ ] 组件使用文档已创建
- [ ] 示例代码已提供

## 🎯 生产环境准备

### 代码优化
- [ ] 移除 console.log 调试代码
- [ ] 优化图表加载性能
- [ ] 实现错误上报机制
- [ ] 添加加载超时处理

### 配置更新
- [ ] 更换为生产数据源
- [ ] 配置正确的 API 端点
- [ ] 设置合适的缓存策略
- [ ] 配置 CDN（如需要）

### 许可证
- [ ] 确认已购买 TradingView 商业许可证
- [ ] 许可证密钥已配置
- [ ] 许可证有效期检查

### 部署检查
- [ ] 构建生产版本 `npm run build:h5`
- [ ] 静态资源路径正确
- [ ] 服务器配置正确
- [ ] HTTPS 配置（如需要）
- [ ] 性能测试通过

## ✅ 最终验收

### 功能验收
- [ ] 所有核心功能正常工作
- [ ] 图表加载速度可接受
- [ ] 交互体验流畅
- [ ] 错误处理完善

### 性能验收
- [ ] 首屏加载时间 < 3秒
- [ ] 图表渲染流畅（60fps）
- [ ] 内存使用正常
- [ ] 无内存泄漏

### 兼容性验收
- [ ] 主流浏览器兼容
- [ ] 移动端适配良好
- [ ] 不同分辨率显示正常

### 文档验收
- [ ] 开发文档完整
- [ ] 使用说明清晰
- [ ] 故障排除指南有效
- [ ] 示例代码可运行

## 📝 备注

### 已知限制
- 仅支持 H5 平台
- 需要商业许可证用于生产环境
- 库文件较大（约 50MB）

### 后续优化
- 考虑实现图表懒加载
- 添加更多自定义功能
- 优化移动端体验
- 实现图表快照功能

---

**检查完成日期**: ___________

**检查人**: ___________

**备注**: ___________
